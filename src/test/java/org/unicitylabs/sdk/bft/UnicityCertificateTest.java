package org.unicitylabs.sdk.bft;

import java.io.IOException;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import org.unicitylabs.sdk.serializer.UnicityObjectMapper;
import org.unicitylabs.sdk.util.HexConverter;

public class UnicityCertificateTest {
  @Test
  public void testUnicityCertificateDeserializationFromCbor() throws IOException {
    byte[] data = HexConverter.decode("d903ef8701d903f08a011a001ea47f005844303030306464313361666438613231333530336162663037313838353439333665333862393739633964396262393339323762333930393932346630373733313362313958443030303064643133616664386132313335303361626630373138383534393336653338623937396339643962623933393237623339303939323466303737333133623139401a68c413dff600f6582035ed27f40a24cdc321f92f3f59e265b817c986c98ff7d7e3e12367221b77735458207f58d8708258c4834849627c3110783be0c0ae9b344be807629e0b8e98e441cd82418080d903f683010780d903e98801031a009936f2001a68c413e15820c162885b569be72c83f14afc6e0e5533267022f337c1cac6f0028dbc77737fdd58209c08adef980baed2fe5444e116b777646b340fbb0a500168ac9477efc8a80386a1783531365569753248416d4562723766323557666d4a65457968713775444451646339536e656471667945585a70474e474e426177416e58410d6b0908ff4fa4c3b196c63c6420482d02e68e6ed3bdc4184d524833c50c4f0f58787dcb038b0a8d49b9a1bc260a5ceff4048a39e2984b9d4b349176d2039c0101");
    Assertions.assertEquals(
        "d903ef8701d903f08a011a001ea47f005844303030306464313361666438613231333530336162663037313838353439333665333862393739633964396262393339323762333930393932346630373733313362313958443030303064643133616664386132313335303361626630373138383534393336653338623937396339643962623933393237623339303939323466303737333133623139401a68c413dff600f6582035ed27f40a24cdc321f92f3f59e265b817c986c98ff7d7e3e12367221b77735458207f58d8708258c4834849627c3110783be0c0ae9b344be807629e0b8e98e441cd82418080d903f683010780d903e98801031a009936f2001a68c413e15820c162885b569be72c83f14afc6e0e5533267022f337c1cac6f0028dbc77737fdd58209c08adef980baed2fe5444e116b777646b340fbb0a500168ac9477efc8a80386a1783531365569753248416d4562723766323557666d4a65457968713775444451646339536e656471667945585a70474e474e426177416e58410d6b0908ff4fa4c3b196c63c6420482d02e68e6ed3bdc4184d524833c50c4f0f58787dcb038b0a8d49b9a1bc260a5ceff4048a39e2984b9d4b349176d2039c0101",
        HexConverter.encode(
            UnicityObjectMapper.CBOR.writeValueAsBytes(
                UnicityObjectMapper.CBOR.readValue(data, UnicityCertificate.class)
            )
        )
    );;

  }

}
